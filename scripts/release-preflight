#!/usr/bin/env bash
# release-preflight — one-command local release gate
# Runs the same fast quality checks as CI plus upstream compatibility.

set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
cd "$ROOT_DIR"

echo "==> install hooks"
./scripts/install-hooks

echo "==> run shared quality gate"
./scripts/pre-push-checks

echo "==> check upstream pi compatibility (dry-run)"
./scripts/check-upstream --dry-run

echo "✅ release preflight passed"
